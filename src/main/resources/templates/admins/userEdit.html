<!DOCTYPE html>
<html lang="en">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">>
<head th:include="admins/parts/head.html :: head">

</head>

<body style="background-color: #eee">

<div class="modal fade show" style="display: block; padding-right: 17px;" th:id="${user.id}">
    <div class="modal-dialog" role="document">
        <div class="modal-content">

            <form enctype="multipart/form-data"
                  th:action="@{/admins/users/edit/{path}(path=${user.id})}"
                  method="post"
                  th:object="${user}">

                <div class="modal-header">
                    <a href="/admins/users">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </a>
                    <h4 class="modal-title" th:text="'Edit user № ' + *{id}"></h4>
                </div>
                <div class="modal-body">

                    <div class="form-group form-inline">

                        <h5 th:if="${#fields.hasErrors()}">Please correct the problems below and resubmit.</h5>

                        <label for="username" style="text-align: center">Username: </label>
                        <input id="username" type="text" class="form-control fa-align-right"
                               style="margin-left: auto"
                               th:value="${user.username != null ? user.username : ''}"
                               th:attrappend="class=${#fields.hasErrors('email')} ? ' is-invalid' + ''"
                               name="username" placeholder="Input username" />
                        <span class="validationError text-danger"
                              th:if="${#fields.hasErrors('username')}"
                              th:errors="*{username}"></span>
                        <span class="validationError text-danger"
                              th:if="${userExist != null}"
                              th:text="${userExist}"></span>
                    </div>


                    <div class="form-group form-inline">
                        <label style="text-align: center">Firstname</label>
                        <input type="text" class="form-control"
                               style="margin-left: auto"
                               th:value="${user.firstName != null ? user.firstName : ''}"
                               name="firstName" placeholder="Input firstName" /></div>

                    <div class="form-group form-inline">
                        <label style="text-align: center">Lastname</label>
                        <input type="text" class="form-control"
                               style="margin-left: auto"
                               th:value="${user.lastName != null ? user.lastName : ''}"
                               name="lastName" placeholder="Input lastname"></div>

                    <div class="form-group form-inline">
                        <label style="text-align: center">Post Code</label>
                        <input type="text" class="form-control"
                               style="margin-left: auto"
                               th:value="${user.postCode != null ? user.postCode : ''}"
                               name="postCode" placeholder="Input Post Code"></div>

                    <div class="form-group form-inline">
                        <label style="text-align: center">Nymphos</label>
                        <input type="text" class="form-control"
                               style="margin-left: auto"
                               th:value="${user.phoneNumber != null ? user.phoneNumber : ''}"
                               th:attrappend="class=${#fields.hasErrors('phoneNumber')} ? ' is-invalid' + ''"
                               name="phoneNumber" placeholder="Input Nymphos"></div>
                        <span class="validationError text-danger"
                              th:if="${#fields.hasErrors('phoneNumber')}"
                              th:errors="*{phoneNumber}"></span>

                    <div class="form-group form-inline">
                        <label style="text-align: center">Address</label>
                        <input  type="text" class="form-control"
                                style="margin-left: auto"
                                th:value="${user.address != null ? user.address : ''}"
                                name="address" placeholder="Input address"></div>

                    <div class="form-group form-inline">
                        <label style="text-align: center">Email</label>
                        <input type="text" class="form-control"
                               style="margin-left: auto"
                               th:value="${user.email != null ? user.email : ''}"
                               th:attrappend="class=${#fields.hasErrors('email')} ? ' is-invalid' + ''"
                               name="email" placeholder="Input Email"></div>
                        <span class="validationError text-danger"
                              th:if="${#fields.hasErrors('email')}"
                              th:errors="*{email}"></span>

                    <div class="form-group form-inline">
                        <label style="text-align: center">Password</label>
                        <input type="text" class="form-control"
                               style="margin-left: auto"
                               th:value="${user.password != null ? user.password : ''}"
                               th:attrappend="class=${#fields.hasErrors('password')} ? ' is-invalid' + ''"
                               name="Password" placeholder="Input Password"></div>
                        <span class="validationError text-danger"
                              th:if="${#fields.hasErrors('password')}"
                              th:errors="*{password}"></span>

                    <div class="form-group form-inline">
                        <label style="text-align: center">Password Copy</label>
                        <input type="text" class="form-control"
                               style="margin-left: auto"
                               th:value="${user.password2 != null ? user.password2 : ''}"
                               th:attrappend="class=${#fields.hasErrors('password2')} ? ' is-invalid' + ''"
                               name="Password2" placeholder="Input Password2"></div>
                        <span class="validationError text-danger"
                              th:if="${#fields.hasErrors('password2')}"
                              th:errors="*{password2}"></span>

                    <div class="form-group form-inline">
                        <label>Roles</label>
                        <th:block th:each="role : ${roles}">
                            <th:block th:if="${user.getRoles() != null}">
                                <p style="margin-left: auto"><input  type="checkbox" th:name="${role}"
                                           th:checked="${#strings.contains(user.getRoles(),role)} ? 'checked' : 'No'">[[${role}]]</p>
                            </th:block>
                            <th:block th:unless="${user.getRoles() != null}">
                                <p style="margin-left: auto"><input  type="checkbox" th:name="${role}"> [[${role}]]</p>
                            </th:block>
                        </th:block>
                    </div>



                </div>
                <div class="modal-footer">
                    <a href="/admins/users">
                        <button type="button"  class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </a>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
                <input type="hidden" name="_csrf" th:value="${_csrf.token}"/>
            </form>
        </div><!-- /.модальное окно-Содержание -->
    </div><!-- /.модальное окно-диалог -->
</div><!-- /.модальное окно -->



</body>
</html>